<html><head>
<meta charset='UTF-8'>
<link href='resource/bootstrap.min.css' rel='Stylesheet' type='text/css' />
<link href='resource/style.css' rel='Stylesheet' type='text/css' />
</head>
<body>
<div id='page'>
<h1 class='entry-title'>Formatting bound ASP.NET types requires explicitly changing the HtmlEncode property</h1>
 <a class='url fn n profile-usercard-hover' href='https://social.msdn.microsoft.com/profile/Dan Fernandez - MSFT' target='_blank'>Dan Fernandez - MSFT</a>
<time>    2/8/2006 10:46:00 AM</time>
<hr>
<div id='content'><p><font face=Arial size=2>I ran into this one while migrating our Beta 2 code to VS RTM for an internal reporting site, but the behavior for ASP.NET 2.0 changed within betas and, in short, anytime you want to add a formatting string, like&nbsp;any of the&nbsp;</font><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpguide/html/cpconformattingtypes.asp"><font face=Arial size=2>numeric or date format strings</font></a><font face=Arial size=2>&nbsp;in a bound&nbsp;field&nbsp;, you have to explicitly set the HTMLEncode property to "false".</font></p>
<p><font face=Arial size=2>Here's what your code should look like with the newly added property in bold.</font></p>
<p><font face=Arial><font size=2><font color=#0000ff>&lt;</font><font color=#800000>asp</font><font color=#0000ff>:</font><font color=#800000>BoundField</font> <font color=#ff0000>DataField</font><font color=#0000ff>="Total"</font> <font color=#ff0000>DataFormatString</font><font color=#0000ff>="{0:#,###}"</font>&nbsp; <font color=#ff0000><strong>HtmlEncode</strong></font><font color=#0000ff><strong>="False"</strong> /&gt;</font></font></font></p>
<table border=0>
<tbody>
<tr>
<td align=middle><font face=Arial size=2><strong>Before HtmlEncode property</strong></font></td>
<td align=middle><font face=Arial size=2><strong>After HtmlEncode property</strong></font></td></tr>
<tr>
<td><font face=Arial size=2>Total<br />100000000 </font></td>
<td><font face=Arial size=2>Total<br />100,000,000</font> </td></tr></tbody></table>
<p>
<p><font face=Arial size=2></font></p><font face=Arial size=2>Why does ASP.NET need the explicit HtmlEncode property? From an internal thread, the short answer is that ASP.NET will by default assume the value is html encoded&nbsp;and then treat it like a string which rules out numeric/date formatting.</font></p></div>
</div></body>
<script type='text/javascript' src='resource/jquery-1.12.1.min.js'></script>
<script type='text/javascript' src='resource/replace.js'></script>
</html>
